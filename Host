#!/bin/bash

# Função para exibir o menu principal
show_menu() {
    clear
    echo -e "\e[1;34m███████╗██╗  ██╗ █████╗ ██╗    ██╗ ██████╗ ███████╗███████╗\e[0m"
    echo -e "\e[1;34m╚══██╔══╝██║  ██║██╔══██╗██║    ██║██╔══██╗██╔════╝██╔════╝\e[0m"
    echo -e "\e[1;34m   ██║   ███████║███████║██║ █╗ ██║██║  ██║███████╗███████╗\e[0m"
    echo -e "\e[1;34m   ██║   ██╔══██║██╔══██║██║███╗██║██║  ██║╚════██║╚════██║\e[0m"
    echo -e "\e[1;34m   ██║   ██║  ██║██║  ██║╚███╔███║██████╔╝███████║███████║\e[0m"
    echo -e "\e[1;34m   ╚═╝   ╚═╝  ╚═╝╚═╝  ╚═╝ ╚══╝╚══╝╚═════╝ ╚══════╝╚══════╝\e[0m"
    echo
    echo -e "\e[1;32mShadow Host Menu:\e[0m"
    echo
    echo -e "\e[1;33m1.\e[0m HOST SA-MP"
    echo -e "\e[1;33m2.\e[0m Sair"
    echo
    read -p "Escolha uma opção [1-2]: " option
    case $option in
        1)
            samp_host_menu
            ;;
        2)
            exit 0
            ;;
        *)
            echo "Opção inválida! Tente novamente."
            sleep 2
            show_menu
            ;;
    esac
}

# Função de HOST SA-MP
samp_host_menu() {
    clear
    echo -e "\e[1;32mMENU - HOST SA-MP:\e[0m"
    echo
    echo -e "\e[1;33m1.\e[0m Logar com Key"
    echo -e "\e[1;33m2.\e[0m Abrir Painel Admin (Senha: 16052011)"
    echo -e "\e[1;33m3.\e[0m Iniciar Servidor"
    echo -e "\e[1;33m4.\e[0m Voltar ao Menu Principal"
    echo
    read -p "Escolha uma opção [1-4]: " option
    case $option in
        1)
            logar_key
            ;;
        2)
            painel_admin
            ;;
        3)
            iniciar_servidor
            ;;
        4)
            show_menu
            ;;
        *)
            echo "Opção inválida! Tente novamente."
            sleep 2
            samp_host_menu
            ;;
    esac
}

# Função de logar com Key
logar_key() {
    clear
    echo -e "\e[1;32mPor favor, insira sua Key de login:\e[0m"
    read -p "Key: " key
    echo "Logando com a Key: $key..."
    sleep 1
    samp_host_menu
}

# Função para abrir o painel Admin
painel_admin() {
    clear
    read -sp "Digite a senha para acessar o Painel Admin: " senha
    echo
    if [ "$senha" == "16052011" ]; then
        echo -e "\e[1;32mAcesso autorizado ao Painel Admin!\e[0m"
        painel_admin_menu
    else
        echo -e "\e[1;31mSenha incorreta. Tente novamente.\e[0m"
        sleep 2
        samp_host_menu
    fi
}

# Menu de opções no Painel Admin
painel_admin_menu() {
    clear
    echo -e "\e[1;32mPainel Admin - Shadow Host:\e[0m"
    echo
    echo -e "\e[1;33m1.\e[0m Gerar Key"
    echo -e "\e[1;33m2.\e[0m Atualizar Pastas"
    echo -e "\e[1;33m3.\e[0m Voltar ao Menu Principal"
    echo
    read -p "Escolha uma opção [1-3]: " option
    case $option in
        1)
            gerar_key
            ;;
        2)
            atualizar_pastas
            ;;
        3)
            show_menu
            ;;
        *)
            echo "Opção inválida! Tente novamente."
            sleep 2
            painel_admin_menu
            ;;
    esac
}

# Função de geração de Key no Painel Admin
gerar_key() {
    clear
    echo -e "\e[1;32mGerando uma nova Key...\e[0m"
    key=$(openssl rand -base64 32)
    echo "Sua nova Key gerada é: $key"
    sleep 2
    painel_admin_menu
}

# Função para atualizar as pastas
atualizar_pastas() {
    clear
    echo -e "\e[1;32mAtualizando pastas...\e[0m"
    # Comando para atualizar ou verificar arquivos
    # Você pode adicionar comandos para verificar a pasta e baixar atualizações
    sleep 2
    painel_admin_menu
}

# Função para iniciar o servidor
iniciar_servidor() {
    clear
    echo -e "\e[1;32mIniciando o servidor...\e[0m"
    # Comando para iniciar o servidor
    # Adicione a execução do servidor SA-MP aqui, por exemplo:
    # ./samp03svr
    sleep 2
    samp_host_menu
}

# Função para parar o servidor
parar_servidor() {
    clear
    echo -e "\e[1;32mParando o servidor...\e[0m"
    # Comando para parar o servidor
    # Adicione o comando necessário para matar o processo do servidor
    # pkill -f samp03svr
    sleep 2
    samp_host_menu
}

# Função para verificar os arquivos da Gamemode
verificar_gamemode() {
    clear
    echo -e "\e[1;32mVerificando arquivos da Gamemode...\e[0m"
    # Aqui você pode colocar a lógica para verificar se há arquivos na pasta `gamemode`
    if [ -z "$(ls /sdcard/ShadowHost/gamemode)" ]; then
        echo -e "\e[1;31mNenhum arquivo encontrado na pasta Gamemode.\e[0m"
    else
        echo -e "\e[1;32mArquivos encontrados na pasta Gamemode:\e[0m"
        ls /sdcard/ShadowHost/gamemode
    fi
    sleep 2
    samp_host_menu
}

# Chama o menu inicial
show_menu
